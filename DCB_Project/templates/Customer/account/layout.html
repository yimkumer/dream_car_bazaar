<!DOCTYPE html5>
<html dir="ltr" lang="en">
{% load static %}

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Title -->
    <title>DreamcarBazaar - Get Your Dream Car</title>

    <meta name="keywords" content="buy old car, sell old car, buy or sell old car in dehradun">
    <meta name="description" content="DreamCarBazaar - Automotive & Car Dealer HTML Template">
    <meta name="robots" content="noindex, nofollow">
    <!-- css file -->
    <link rel="stylesheet" href="{% static  'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- Responsive stylesheet -->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <!-- Favicon -->
    <link href="{% static 'images/favicon.ico' %}" sizes="128x128" rel="shortcut icon" type="image/x-icon" />
    <link href="{% static 'images/favicon.ico' %}" sizes="128x128" rel="shortcut icon" />

    <!-- New Style Css -->
    <link rel="stylesheet" href="{% static 'css/new-style.css' %}">
    <link rel="stylesheet" href="{% static 'css/customer-css.css' %}">
    
    <style>
        /* ==============================================Mobile Fixed Footer======================================= */
        .fixed-footer-section-mobile {
            position: fixed;
            bottom: 0;
            padding: 0 10px !important;
            background: #f0f0f0;
            width: 100%;
        }


        .fixed-footer-mobile-div {
            text-align: center;
            color: #0a2357;
            padding-top: 10px;
            display: flex;
            flex-wrap: wrap;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .fixed-footer-mobile-div div,
        .fixed-footer-mobile-div p {
            font-size: 10px;
            font-weight: 600;
        }

        .fixed-account-div {
            padding: 10px;
            background: #fff;
            transform: scale(1.3);
            border-radius: 50px;
            width: 70px;
            height: 70px;
            position: absolute;
            box-shadow: 0 0 10px #bebebe;
            top: -5px;
        }
        .addcar-select.is-invalid, .was-validated .addcar-select:invalid{
            border-color: #dc3545 !important;
        }
        
        .error-border.is-invalid, .was-validated .error-border:invalid{
            border-color: #dc3545 !important;
        }
        
    </style>

    {% block common_css %}
    {% endblock %}

</head>

<body>


     <div class="wrapper">

        <!-- header top -->
        {% include 'Website/top_header.html' %}
        <!-- Main Header Nav -->
        {% include 'Website/top_navbar.html' %}



            <!-- Profile card -->
            <section class="profile-section">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-4">
                            {% include 'Customer/account/side_navbar.html' %}
                        </div>
                        <div class="col-lg-7">
                            {% block body %}

                            {% endblock %}

                        </div>

                    </div>
                </div>
            </section>


        <!--<a class="scrollToHome" href="#"><i class="fas fa-arrow-up"></i></a>-->
        
        <section class="fixed-footer-section-mobile" id="fixed-footer">

        </section>
     </div>
    <!-- Wrapper End -->
    
    
    <script>
    $(document).ready(function() {
    console.log('sdfsdn')



    $('#car_brand').change(async function() {
        var brandID = $(this).val();
        console.log('brandID = ', brandID)
        await $.get('/get_car_model/', { car_brand_id: brandID }, async function(data) {
            var carModelSelect = $('#car_model');
            console.log('carModelSelect= ',carModelSelect)
            var model_text = '<option value="">Select Model</option>'
            await $.each(data, function(index, model) {
                console.log('data = ',data)
                var a = '<option value='+model.id+'>'+model.name+'</option>'
                model_text += a
<!--                carModelSelect.append('<option data-tokens="" value='+model.id+'>'+model.name+'</option>');-->
            });
             carModelSelect.html(model_text);

        });
    });

    $('#car_model').change(function() {
        var carModelId = $(this).val();
        $.get('/get_car_variant/', { car_model_id: carModelId }, function(data) {
            var carVariantSelect = $('#car_variants');
            carVariantSelect.empty();
            carVariantSelect.append($('<option>', {
                    value: "",
                    text: "Select Variants"
                }));
            $.each(data, function(index, variant) {
                carVariantSelect.append($('<option>', {
                    value: variant.id,
                    text: variant.name
                }));
            });
        });
    });
});

</script>

 <script src="{% static 'js/jquery-3.6.0.js' %}"></script>
    <script src="{% static 'js/jquery-migrate-3.0.0.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/bootstrap-select.min.js' %}"></script>
    <script src="{% static 'js/jquery.mmenu.all.js' %}"></script>
    <script src="{% static 'js/ace-responsive-menu.js' %}"></script>
    <script src="{% static 'js/isotop.js' %}"></script>
    <script src="{% static 'js/snackbar.min.js' %}"></script>
    <script src="{% static 'js/simplebar.js' %}"></script>
    <script src="{% static 'js/parallax.js' %}"></script>
    <script src="{% static 'js/scrollto.js' %}"></script>
    <script src="{% static 'js/jquery-scrolltofixed-min.js' %}"></script>
    <script src="{% static 'js/jquery.counterup.js' %}"></script>
    <script src="{% static 'js/wow.min.js' %}"></script>
    <script src="{% static 'js/progressbar.js' %}"></script>
    <script src="{% static 'js/slider.js' %}"></script>
    <script src="{% static 'js/timepicker.js' %}"></script>
    <script src="{% static 'js/wow.min.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>
    <!-- Bootstrap Notify -->
    <script src="{% static 'js/bootstrap-notify/bootstrap-notify.min.js' %}"></script>
    
    <script type="text/javascript">
        $(window).load(function () {
            var mobile = (/iphone|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));
            var mySecondDiv=$('<div class="container"> <div class= "row" > <div class="col-2"><div class="fixed-footer-mobile-div"><a href="/add_car/"><div><i class="fa fa-home" aria-hidden="true"></i></div><p>Add Car</p></a></div></div><div class="col-2"><a href="/my_vehicle/"><div class="fixed-footer-mobile-div"><div><i class="fa fa-car" aria-hidden="true"></i></div><p>My Car</p></a></div></div><div class="col-4"><div class="fixed-footer-mobile-div"><a href="/profile/"><div class="fixed-account-div"><div><i class="fa fa-user" aria-hidden="true"></i></div><p>My Profile</p></a></div></div></div><div class="col-2"><a href="/whislist_car/"><div class="fixed-footer-mobile-div"><div><i class="fa fa-heart" aria-hidden="true"></i></div><p>My Wishlist</p></a></div></div><div class="col-2"><a href="/"><div class="fixed-footer-mobile-div"><div><i class="fas fa-ellipsis-h" aria-hidden="true"></i></div><p>More</p></a></div></div></div ></div >');
            if (mobile) {
                $('.customer-prfile-card').css({"display":"none"});
                $('#fixed-footer').html(mySecondDiv);
            }
        });
    </script>
    
    <script>
        $(window).scroll(function (event) {
            var scroll = $(window).scrollTop();
            if (scroll>= 158){
                $('.customer-prfile-card').addClass("sticky-customer-profile");
            }
            if (scroll< 158){
                $('.customer-prfile-card .sticky-customer-profile').removeClass("sticky-customer-profile");
            }
        });
    </script>
    
    
    
<script>
    jQuery(document).ready(function () {
  ImgUpload();
});

function ImgUpload() {
  var imgWrap = "";
  var imgArray = [];

  $('.upload__inputfile').each(function () {
    $(this).on('change', function (e) {
      imgWrap = $(this).closest('.upload__box').find('.upload__img-wrap');
      var maxLength = $(this).attr('data-max_length');
      var minLength = $(this).attr('data-min_length');

      var files = e.target.files;
      var filesArr = Array.prototype.slice.call(files);
      var iterator = 0;
      filesArr.forEach(function (f, index) {

        if (!f.type.match('image.*')) {
          return;
        }
        
        
        

        if (imgArray.length > maxLength) {
            
            alert("You can add Maximum 20IMages")
            return false;
            
        //   return false
        } else {
          var len = 0;
          for (var i = 0; i < imgArray.length; i++) {
            if (imgArray[i] !== undefined) {
              len++;
            }
          }
          if (len > maxLength) {
            return false;
          } else {
            imgArray.push(f);

            var reader = new FileReader();
            reader.onload = function (e) {
              var html = "<div class='upload__img-box'><div style='background-image: url(" + e.target.result + ")' data-number='" + $(".upload__img-close").length + "' data-file='" + f.name + "' class='img-bg'><div class='upload__img-close'></div></div></div>";
              imgWrap.append(html);
              iterator++;
            }
            reader.readAsDataURL(f);
          }
        }
      });
    });
  });

  $('body').on('click', ".upload__img-close", function (e) {
    var file = $(this).parent().data("file");
    for (var i = 0; i < imgArray.length; i++) {
      if (imgArray[i].name === file) {
        imgArray.splice(i, 1);
        break;
      }
    }
    $(this).parent().parent().remove();
  });
}
</script>

<script>
    $(window).scroll(function () {
        var scroll = $(window).scrollTop();

        if (scroll <= 249) {
            //clearHeader, not clearheader - caps H
            $(".customer-prfile-card.sticky-customer-prfile-card").removeClass("sticky-customer-prfile-card");
        }
        if (scroll >= 250) {
            //clearHeader, not clearheader - caps H
            $(".customer-prfile-card").addClass("sticky-customer-prfile-card");
        }
    }); //missing );
    
    
    
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        // (function () {
        //     'use strict'
        //     var forms = document.querySelectorAll('.needs-validation')
        //     Array.prototype.slice.call(forms)
        //         .forEach(function (form) {
        //             form.addEventListener('submit', function (event) {
        //                 if (!form.checkValidity()) {
        //                     event.preventDefault()
        //                     event.stopPropagation()
        //                     form.scrollIntoView();
        //                 }

        //                 form.classList.add('was-validated')
        //             }, true)
        //         })
        // })()
</script>
    

    {% if messages %}
    {% for message in messages %}
    
    <script>
        //Notify
     console.log('messages')
     console.log('mes = ', "{{message}}")
    $.notify({
        icon: '{% if message.tags == 'success' %}fas fa-check-circle{% else %}fas fa-times-circle{% endif %}',
        title: '',
        message: '{{message}}',
    },{
        type: '{% if message.tags == 'warning' %}danger{% else %}{{message.tags}}{% endif %}',
        placement: {
            from: "top",
            align: "center"
        },
        time: 1000,
    });
    </script>
    {% endfor %}
    {% endif %}

    {% block js %}

    {% endblock %}
</body>

</html>